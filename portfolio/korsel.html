<!DOCTYPE html>
<html>

<head>
<style>
	* { font-family: Arial; }
    main { background-color: #FDFDFD; }
	h2 { font-size: 40px; text-align: center; margin: 0 0 0 0;}
  h3 { font-size: 32px; text-align: center; margin: 0 0 0 0; }
  p { text-align: center; margin: 0; }
  section { border: 1px solid #E3E3E1; border-radius: 5px; 
            background-color: #E3E3E1;
            width: 98%; margin: 10px auto; 
            padding: 5px; }
  .btn { height: min(40px); width: 90%; 
        border: 1px solid #BDBDC7;  
        margin: 4px auto; border-radius: 8px;
		    overflow: hidden; 
        float: center; color: black; 
        background-color: #fbfbfb;}
  .btn label { 
  float: center; font-size: 24px;
    }
  .btn input:checked + span { background-color: blue; color: white; }
  .btn label span {
        text-align: center;
        padding: 8px 0;
        display: block; 
        }
  .btn label input {
        position: absolute;
        display: none;
        color: black !important;
        }
  .btn label input + span{color: black;}

  button { height: 40px; width: 90%; margin: auto; 
           border-radius: 5px; 
           background-color: #505050; color: white; 
           font-size: 30px; }
  .panel { height: 40px; width: 90%; 
           border-radius: 4px; margin: auto;
           text-align: center; 
           font-size: 24px; }
  .panel span { padding: 8px 0;
            display: block; }

  
  #riskNone { display: block; background-color: #fff; color: gray;
            border: 1px solid gray;}
  #riskLow { display: none; background-color: greenyellow; 
            border: 1px solid green;}
  #riskMedium { display: none; background-color: yellow; 
            border: 1px solid orange;}
  #riskHigh { display: none; background-color: pink; 
            border: 1px solid red;}
  #btnRisk { display: block; }
  
  #afibtreat { display: none; }
  #stenosistreat { display: none; }

  .conclusion { height: 40px; width: 100%; border-radius: 4px; text-align: center; font-size: 24px; }
	.conclusion span { padding: 8px 0;
  display: block; }
  #btnConcl { display: block; }
  #conclPlaceholder { display: block; background-color: #fff; color: gray;
            border: 1px solid gray;}
  #conclNone { display: none;}
  #concl3mdr { display: none;}
  #concl6mdr { display: none;}
  #conclCarotis { display: none;}
  #conclRehab { display: none;}
  
  @media (orientation: portrait){
    main { width: 100%; }

  }
  @media (orientation: landscape){}
  
</style>
<script>
  function evalRisk(){
  	let age = 0;
  	if( document.getElementById('age').checked == true ){ 
      age = 2 } else { age = 0 };
    let hypertension = 0;
  	if( document.getElementById('hypertension').checked == true ){ 
      hypertension = 1 } else { hypertension = 0 };
  	let ihd = 0;
  	if( document.getElementById('ihd').checked == true ){ 
      ihd = 1 } else { ihd = 0 };
  	let prevstroke = 0;
  	if( document.getElementById('prevstroke').checked == true ){ 
      prevstroke = 3 } else { prevstroke = 0 };
  	let diabetes = 0;
  	if( document.getElementById('diabetes').checked == true ){ 
      diabetes = 3 } else { diabetes = 0 };
  	let insufficient = 0;
  	if( document.getElementById('insufficient').checked == true ){ 
      insufficient = 3 } else { insufficient = 0 };
    let currentStroke = parseFloat(document.forms[1].persist.value);
    /*document.form[1].persist.value;*/
    
    let riskScore = age + hypertension + ihd + prevstroke + 
                    diabetes + insufficient + currentStroke; 
    window.riskScore = riskScore;                
    /*document.getElementById('prompt').innerHTML = riskScore;*/
    document.getElementById('btnRisk').innerHTML = "Revurder";
    /*document.getElementById('riskLow').style.display = "block";*/

    if(riskScore <= 3){ 
      document.getElementById('riskLow').style.display = "block";
      document.getElementById('riskMedium').style.display = "none";
      document.getElementById('riskHigh').style.display = "none";
      document.getElementById('riskNone').style.display = "none";
     } else if(riskScore > 3 & riskScore < 8){
      document.getElementById('riskLow').style.display = "none";
      document.getElementById('riskMedium').style.display = "block";
      document.getElementById('riskHigh').style.display = "none";
      document.getElementById('riskNone').style.display = "none";
     } else if(riskScore > 7){
      document.getElementById('riskLow').style.display = "none";
      document.getElementById('riskMedium').style.display = "none";
      document.getElementById('riskHigh').style.display = "block";
      document.getElementById('riskNone').style.display = "none";
     }

  }
  
  function stenosistreat(ekg){
    	document.getElementById('stenosistreat').style.display = "block";
    }

	function afibtreat(ekg){
    	document.getElementById('afibtreat').style.display = "block";
    }
	
  function conclude(){
    /* - riskScore er en global score variabel - */
    /* - currentStroke - */
    let currentStroke = 0;
      if( document.getElementById('minor').checked == true ){ 
        currentStroke = 1 } else 
      if( document.getElementById('major').checked == true ){ 
        currentStroke = 2 };
    /* - stenosis - */
    let stenose = document.forms[3].stenosis.value; /* 0,1,2,9 */ 
    /* - afib - */
    let afib = document.forms[4].ekg.value; /* 0,1,9 */
    /* - stenosisTreat - */  
    let stenosisTreat = document.forms[3].stenosisTreat.value;
    /* - currentStroke - */
    let afibTreat = document.forms[4].afib.value;
    /* - persist - */
    let persist = 0;
      if( document.getElementById('parese').checked == true |
          document.getElementById('hemianopsi').checked == true |
          document.getElementById('cognitive').checked == true  
          ){ persist = 1 }
    let concludeCat = 0;   /* 0,3,6,7,8 */
        if( riskScore <= 3 & 
            currentStroke < 2 & 
            stenose < 2 & 
            afib == 0 ){concludeCat = 0} else
        if( riskScore <= 3 & 
            currentStroke < 2 & 
            afib == 1 &
            afibTreat == 0 ){concludeCat = 3} else
        if( riskScore <= 3 & 
            currentStroke < 2 & 
            (stenose == 9 | afib == 9) ){concludeCat = 3} else
        if( riskScore <= 3 & 
            currentStroke == 2 & 
            persist == 0){concludeCat = 3} else
        if( (riskScore >= 4 & riskScore <= 7) & 
            currentStroke < 2 ){concludeCat = 3} else
        if( (riskScore >= 4 & riskScore <= 7) & 
            currentStroke == 2 &
            persist == 0){concludeCat = 6} else
        if( persist == 1 ){concludeCat = 8}
        if( riskScore >= 8 ){concludeCat = 6} else
        if( stenosisTreat == 1 ){concludeCat = 6} else
        if( afibTreat == 1 ){concludeCat = 6} else
        if( stenose == 2 & 
            stenosisTreat == 0 ){concludeCat = 7} else
        
    /*
    <div class="conclusion" id="conclNone">
  <span>1) Kørsel tilladt</span>
  </div>
  <div class="conclusion" id="concl3mdr">
  <span>2) Kørselsforbud i 3 måneder ()</span>
  </div>
  <div class="conclusion" id="concl6mdr">
  <span>3) Kørselsforbud i 6 måneder - Revurdering af neurolog</span>
  </div>
  <div class="conclusion" id="conclCarotis">
  <span>4) Kørselsforbud indtil carotis operation + 1 måned</span>
  </div>
  <div class="conclusion" id="conclRehab">
  <span>5) Kørselsforbud indtil afslutning af rehabilitering</span>
  </div>
    */


	  document.getElementById('btnConcl').innerHTML = "Revurder";
    /*document.getElementById('conclNone').style.display = "block";*/
    document.getElementById('prompt2').innerHTML = concludeCat;
  }
</script>
</head>
  <body>
    <main>
      <!-- Risikofaktorer -->
<section>
      <div>
	<form id="form0">
    <h2>Risikofaktorer</h2>
    <p>Vælg alle relevant</p>
	<div class="btn"><label>
    	<input type="checkbox" id="age" value="2">  
  
  	<span>Alder 70 eller over [2 point]</span>
    
    </label></div>
    <div class="btn"><label>
    	<input type="checkbox" id="hypertension" value="1">  
      <span>Hypertension (BT &gt;140/90 mmHg) [1 point]
  </span>
    </input>
    </label></div>
    <div class="btn"><label>
    	<input type="checkbox" id="ihd" value="1">  
      <span>Iskæmisk hjertesygdom [1 point]
  </span>
    </input>
    </label></div>
    <div class="btn"><label>
    	<input type="checkbox" id="prevstroke" value="3">  
      <span>Tidligere apopleksi [3 point]
  </span>
    </input>
    </label></div>
    <div class="btn"><label>
    	<input type="checkbox" id="diabetes" value="3">  
      <span>Diabetes [3 point]
  </span>
    </input>
    </label></div>
    <div class="btn"><label>
    	<input type="checkbox" id="insufficient" value="3">  
      <span>Erkendt hjerteinsufficiens [3 point]
  </span>
    </input>
    </label></div>
   </form>
  </section>  
   <!-- Symptomvarighed -->
   <section>
    <h2>Symptomvarighed</h2>
    <p>Vælg kun en</p>
  <label>Dato for symptom debut</label><br>
  <input type="date" name="dateDebut"></input><br><br>
  <form id="form1">
  <div class="btn"><label>
    	<input type="radio" id="tia" name="persist" value="0" checked>  
      <span>Remitteret indenfor 24 timer [0 point]
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="radio" id="minor" name="persist" value="2">  
      <span>Remitteret indenfor en uge [2 point]
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="radio" id="major" name="persist" value="2">  
      <span>Fortsat symptomer efter en uge [2 point]
  </span>
    </input>
    </label></div>
    </form><br>
    
   <button id="btnRisk" onClick="evalRisk()">Beregn risiko</button>
   <br>
   <!--  -->
   <div id="prompt"></div>
   <div class="panel" id="riskNone"><span>Risikovurdering</span></div>
   <div class="panel" id="riskLow"><span>Lav risiko for nyt stroke</span></div>
   <div class="panel" id="riskMedium"><span>Middel risiko for nyt stroke</span></div>
   <div class="panel" id="riskHigh"><span>Høj risiko for nyt stroke</span></div>
   
   </section>
   <hr>
  
   <!-- Fortsatte symptomer -->
   <section>
  <h2>Fortsatte symptomer</h2>
  <p>Vælg alle relevant</p>
  <div>
  <form id="form2">
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="checkbox" id="parese" value="1">  
      <span>Lammelse i arm eller ben
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="checkbox" id="hemianopsi" value="1">  
      <span>Hemianopsi
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="checkbox" id="cognitive" value="1">  
      <span>Kognitive vanskeligheder der kan påvirke patientens 
        evne til at køre bil
  </span>
    </input>
    </label></div>
  </form>
  </div>
  </section>
  <!-- Carotis stenose -->
  <section>
  <h2>Carotis stenose</h2>
  <p>Vælg kun en</p>
  <div>
    <form id="form3">
  <div class="btn"><label>
    	<input type="radio" name="stenosis" value="0">  
      <span>Ingen stenose
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="radio" name="stenosis" value="1">
      <span>Stenose &lt;50%
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="radio" name="stenosis" value="2"  
        onclick="stenosistreat(this)">
      <span>Stenose &gt;50%
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="radio" name="stenosis" value="9">
      <span>Ikke undersøgt
  </span>
    </input>
    </label></div>
 
  <div id="stenosistreat">
    <h3>Er der et behandlingstilbud</h3>
  <div class="btn"><label>
  
    	<input type="radio" name="stenosisTreat" value="0">
      <span>Patienten skal opereres
  </span>
    
    </label></div>
    <div class="btn"><label>
    <input type="radio" name="stenosisTreat" value="1">
    <span>Der er ikke noget behandlingstilbud
  </span>
    
    </label></div>
    </div>
  </div>
  </form>
  </section>
  <!-- EKG/Atrieflimmer -->
  <section>
  <h2>EKG</h2>
  <p>Vælg kun en</p>
  <div><form id="form4">
  
  <div class="btn"><label>
    	<input type="radio" name="ekg" value="0">	
      <span>Normal rytme
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="radio" name="ekg" value="1" onclick="afibtreat(this)">	
      <span>Atrieflimmer
  </span>
    </input>
    </label></div>
  <div class="btn"><label>
    	<input type="radio" name="ekg" value="9">	
      <span>Ikke undersøgt
  </span>
    </input>
    </label></div>
  	
  <div id="afibtreat">
  <h3>Er der et behandlingstilbud</h3>
  <div class="btn"><label>
    	<input type="radio" name="afib" value="0">
      <span>Patienten er opstartet AK eller NOAK behandling
  </span>
    </input>
    </label></div>
    <div class="btn"><label>
    <input type="radio" name="afib" value="1">
    <span>Der er ikke noget behandlingstilbud
  </span>
    
    </label></div>
    </div>
	</form></div>
	</div>
  </section>
  <!-- Konklusion -->
  
  <h2>Konklusion</h2>
  
  
  <div class="conclusion" id="conclPlaceholder">
  <span>Tryk</span>
  </div>
  
  
  <button class="" id="btnConcl" onClick="conclude()">
    Tryk her for konklusion</button>
  <div id="prompt2"></div>  
</div>
    </main>
  </body>
</html>
